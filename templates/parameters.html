{% extends "layout.html" %}

{% block head %}
      <script type="text/javascript">
          $(document).ready( function() {
              enrichment_page();
          });
      </script>
{% endblock head %}

{% block content %}

<div class="container-fluid">

<h2 class="row">PARAMETERS</h2>
<div class="row">
    <h3>Upload file</h3>
        <div class="col-md-12">
            <b>Choose File:</b> Expects a tab-delimited text-file (".txt" or ".tsv") with the following 3 column-headers:<br>
                <span class="column_names">
                    <ul>
                        <li class="bulletpoints_li">"population_an": UniProt accession numbers (such as "P00359") for all proteins</li>
                        <li class="bulletpoints_li">"population_int": Protein abundance (intensity) for all proteins (copy number, iBAQ, or any other measure of abundance)</li>
                        <li class="bulletpoints_li">"sample_an": UniProt accession numbers for all proteins in the test group (the group you want to examine for GO term enrichment, these identifiers should also be present in the “population_an” as the test group is a subset of the population)</li>
                    </ul>
                </span>
            <b>Select Organism:</b> Choose the species/organism the identifiers (accession numbers) correspond to.<br>
            <b>Abundance correction:</b> Apply the abundance correction as described in the publication. A column named "population_int" (population intensity) <br>
                that corresponds to the column "population_an" (population accession number) needs to be provided, when selecting this option.<br>
                If "Abundance correction" is deselected "population_int" can be omitted.<br>
            <b>Number of bins:</b> The number of bins created based on the abundance values provided. Only relevant if "Abundance correction" is selected.<br><br>
</div>

<h3>Keyword association</h3>
 <div class="col-md-12">
    <b>GO-terms:</b> Select one of three major GO categories (molecular function, biological process, cellular component) or all three.<br>
    <b>GO basic or slim:</b> Choose between the full Gene Ontology or <a href="http://geneontology.org/page/go-slim-and-subset-guide/">GO slim subset</a> a subset of GO terms that are less fine grained.<br>
    <b>Backtracking parent GO-terms:</b> Include all parent GO-terms.<br><br>
</div>

<h3>Report options</h3>
<div class="col-md-12">
    <b>prepend GO-term level by dots:</b> Add dots to GO-terms to indicate the level in the parental hierarchy.<br>
    <b>overrepresented or underrepresented or both:</b> Choose to only test and report overrepresented or underrepresented GO-terms, or to report both of them.<br>

    <h4>Multiple testing</h4>
        <b>Method for correction of multiple testing:</b> Select a method for multiple testing correction.<br>
        <b>Alpha:</b> Applied to multiple correction methods "Sidak" and "Holm" to calculate "corrected" p-values.<br>
    <h4>Filter results</h4>
        Filter results options simply filter the results based on the provided threshold values and thus influence which results are shown (but not what is being tested).<br>
        "0" means that no filter will be applied<br>
        <b>fold enrichment study/population:</b> Minimum threshold value of "fold_enrichment_study2pop".<br>
        <b>p-value uncorrected:</b> Maximum threshold value of "p_uncorrected".<br>
        <b>FDR-cutoff / p-value multiple testing:</b> Maximum FDR (for Benjamini-Hochberg) or p-values-corrected threshold value.<br><br><br>
</div>

<h2>Results</h2>
    <h3>Column definitions</h3>
    <div class="col-md-12">
        <b>id:</b> GO term ID or Uniprot Keyword term<br>
        <b>over/under:</b>	overrepresented (o) or underrepresented (u)<br>
        <b>perc_associated_study:</b> % associated with the term in the study group<br>
        <b>perc_associated_pop:</b>	% associated with the term in the population group<br>
        <b>fold_enrichment_study2pop:</b> fold change study/population. This value is set to "-1" if either the numerator or the denominator is zero.<br>
        <b>study_count:</b>	number of proteins associating with the GO term or UniProt Keyword in the study<br>
        <b>study_n:</b>	number of proteins in the study group (total)<br>
        <b>pop_count:</b> number of proteins associating with GO term or UniProt Keyword in the population<br>
        <b>pop_n:</b> number of proteins in the population group (total)<br>
        <b>description:</b>	description of the GO term (GO terms only)<br>
        <b>p_uncorrected:</b> Fisher exact test p-value<br>
        <b>FDR / p_multiple_testing_method:</b> Multiple testing correction. FDR (if Benjamini Hochberg) or corrected p-value (all other methods).<br>
        <b>ANs_study:</b> Accession names in the study (UniProt IDs associating with the GO term/keyword)<br>
        <b>ANs_pop: *</b> Accession names in the population (UniProt IDs associating with the GO term/keyword)<br>
        (* "ANs_pop" column is only shown when "abundance correction" is deselected.)<br><br>
</div>
    <h3>MCL clustering</h3>
    <div class="col-md-12">
        <b>inflation factor:</b> Enter a number higher than 1.<br>
        For more information about the <a href="http://micans.org/mcl/">Markov Cluster Algorithm (MCL)</a> please visit the web-page (click on link).<br>
        Some combinations of data and inflation factor can take very long to process. Please be patient.<br>
        <b>Explanation</b><br>
        The aim of the clustering approach is to group results associated with similar accession numbers. Therefore, the <a href="https://en.wikipedia.org/wiki/Jaccard_index">Jaccard-Index</a> of accession numbers (based on the "ANs_study"-column) is calculated, which is used as a similarity matrix and input for the MCL software. The user then chooses an appropriate inflation factor to group the list of results into clusters.
        <br><br>
</div>
    <h3>Filter hierarchy</h3>
    <div class="col-md-12">
        <b>Explanation</b><br>
        of the filtering approach
        blablab<br><br><br>
</div>

<h2>FAQ</h2>
<div class="col-md-12">
    <p>
    AccessionNubers that do not match any <a href="http://geneontology.org/">GO-term</a>
        or UniProt-keyword <a href="http://www.uniprot.org/">UniProt-keyword</a>
        will be disregarded.<br>
    AccessionNumbers without abundance data will be disregarded if "abundance correction" is selected.<br>
    The exact methodology can be found in the <a href="{{ url_for('about') }}">publication</a>.<br><br>

    </p>
</div>

<br><br><br>

</div>
	
{% endblock content %}

