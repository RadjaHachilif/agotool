{% extends "layout.html" %}

{% block head %}
        <!--
      <script type="text/javascript">
          $(document).ready( function () {
              load();
          });
      </script>-->
{% endblock head %}


{% block content %}


<div class="container-fluid">
    <h4>Download results file</h4>
    <a name="file_stream" href="data:application/octet-stream;charset=utf-8;base64,{{ tsv }}" class="btn btn-primary">Download all data</a>
    <br>
    <form id="filter_form" method="Post" action="results_filtered" enctype="multipart/form-data">
        <button id="submit_filter" type="submit" class="btn btn-primary">Filter</button>

        <input type="hiden" name="file_stream" style="display: none;" value="{{ tsv }}" class="btn btn-primary">original unfiltered data</input>
        <input type="hidden" style="display: none;" name="gocat_upk" value="{{ gocat_upk }}">

        <input type="hidden" style="display: none;" name="indent" value="{{ indent }}">
        <br>

    </form>
<!--    <form id="mcl_form" method="Post" action="results_clustered" enctype="multipart/form-data">
        <button id="submit_mcl" type="submit" class="btn btn-primary">MCL</button>

        <input type="hidden" style="display: none;" name="UPK" value="{{ gocat_upk }}">
        <input type="hidden" style="display: none;" name="indent" value="{{ indent }}">
        <br>
    </form>
-->

    {% if errors != [] %}
    <h4>Errors</h4>
        {% for error in errors %}
        <div>{{ error }}</div>
        {% endfor %}
    {% endif %}
    <br>
    <br>

    <table width="90%" class="table table-striped table-bordered">

        <thead>
            <tr>
            {% for h in header%}
                <th>{{ h.replace('_', ' ') }}</th>
            {% endfor %}
            </tr>
        </thead>
         <tbody>
         {% for result_row in results %}
             <tr>
             {% for r in result_row %}
                 <!--<td {% if loop.counter0 in ellipsis_indices %}class="ellipsis" onclick="toggle_ellipsis(this)"{% endif %}>{{ r }}</td>-->
                 <td title="click to show all"><div class="ellipsis long_row" onclick="toggle_ellipsis(this)">{{ r }}</div></td>
             {% endfor %}
             </tr>
         {% endfor %}
         </tbody>
    </table>



</div>

{% endblock content %}
