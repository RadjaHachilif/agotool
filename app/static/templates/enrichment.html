{% extends "layout.html" %}

{% block head %}
      <script type="text/javascript">
          $(document).ready( function() {
              enrichment_page();
          });
      </script>
{% endblock head %}

{% block nav_Enrichment %}
    <li class="nav-item active"> <a class="nav-link" href="{{ url_for('enrichment') }}">Enrichment<span class="sr-only">(current)</span></a></li>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <form id="main_form" method="Post" action="results" enctype="multipart/form-data">
    <br><br>
    <h1 class="row text-center">ENRICHMENT</h1>
    <br>
        <div class="row"><h3>Drag & drop or click to upload a file</h3></div>
        <div class="col-md-10">Please see the <a href="{{ url_for('example') }}">Example</a> page or try one of the examples below.</div>
            <div class="col-md-8">
                <span title="{{ form.userinput_file.description }}">{{ form.userinput_file.label }}: {{ form.userinput_file(class="filestyle btn-info" , **{"data-buttonText" : "Upload file"}) }}</span>
                    {% if form.userinput_file.errors %}
                    <ul class="errors"> {% for error in form.userinput_file.errors %} <b> {{ error }} </b> {% endfor %} </ul>
                    {% endif %}
{#                    <li class="bulletpoints_li"><b>foreground</b>: UniProt Accession Numbers for all proteins in the test group (the group you want to examine for GO term enrichment, these identifiers should also be present in the “background” as the test group is a subset of the background)</li>#}
{#                    <li class="bulletpoints_li"><b>background</b>: UniProt Accession Numbers (such as "P00359") for all proteins</li>#}
{#                    <li class="bulletpoints_li"><b>intensity</b>: Protein abundance (intensity) for all proteins (copy number, iBAQ, or any other measure of abundance)</li>#}
{#                Isoforms and comma separated <b>protein-groups</b> e.g. ("O60462-5;A0A024R412;O60462-4") are accepted as well.<br>#}
            <br>
            <div class="row"> <h4>or alternatively use copy & paste fields</h4></div>
            <div class="row">
                <div class="col-md-10 example_header">examples: <a class="example" href="{{ url_for('example_1') }}">#1</a>  <a class="example" href="{{ url_for('example_2') }}">#2</a> <a class="example" href="{{ url_for('example_3') }}">#3</a></div>

                    <div class="row col-md-10 example_status" value="{{ example_status }}">
                        <h5>Example description: {{ example_title }}</h5>
                        {{ example_description }}
                    </div>
            </div>
{#                <span value="{{ example_status }}" > something </span>#}
{#                </div>#}
{#                , enrichment method 'abundance_correction' data taken from the original publication, please see <a href="{{ url_for('about') }}">about</a> #}
{#                <div class="row col-md-10">#}
{#                    <span title="{{ form.example_status.description }}"> {{ form.example_status.label }}: {{ form.example_status() }} <br> </span>#}
{#                </div>#}

{#                <div class="row col-md-10">Yeast acetylation, enrichment method 'abundance_correction' data taken from the original publication, please see <a href="{{ url_for('about') }}">about</a> for the reference.</div>#}
{#style="display: none;"#}
{#                type="hidden"#}




            <div class="row" id="copy_paste_field">
{#                 From - e.g. MS-Excel - select 1 column for the "Foreground" and either 1 or 2 columns for "Background & Intensity", copy, and paste into the field below. For "abundance_correction" you need a "Background" and "Intensity" values (therfore 2 columns); alternatively you can use only a "Background" without the "Intensity" values, but then please select "compare_samples" from the methods below the copy and paste field.#}

                <div class="col-md-5">
                    {{ form.foreground_textarea.label }}:
                    {{ form.foreground_textarea(rows="4", class="form-control") }}
                </div>
                <div class="col-md-5">
                    {{ form.background_textarea.label }}:
                    {{ form.background_textarea(rows="4", class="form-control") }}
                </div>
            </div>

            <br>
            </div>
                  <div class="row col-md-10">
                      <span title="{{ form.enrichment_method.description }}"> {{ form.enrichment_method.label }}: {{ form.enrichment_method() }} <br> </span>
                  </div>
                  <div class="row col-md-10 taxid">
                      <span><a class="NCBI_TaxID" href="https://www.ncbi.nlm.nih.gov/taxonomy">NCBI TaxID:</a> {{ form.taxid}} <br> </span>
                        {% if form.taxid.errors %}
                        <ul class="errors"> {% for error in form.taxid.errors %} <b> {{ error }} </b> {% endfor %} </ul>
                        {% endif %}
                  </div>
                  <div class="row col-md-10 foreground_replicates">
                      <span title="{{ form.foreground_replicates.description }}"> {{ form.foreground_replicates.label }}: {{ form.foreground_replicates}} <br> </span>
                        {% if form.foreground_replicates.errors %}
                        <ul class="errors"> {% for error in form.foreground_replicates.errors %} <b> {{ error }} </b> {% endfor %} </ul>
                        {% endif %}
                      <span title="{{ form.background_replicates.description }}"> {{ form.background_replicates.label }}: {{ form.background_replicates}} <br> </span>
                        {% if form.background_replicates.errors %}
                        <ul class="errors"> {% for error in form.background_replicates.errors %} <b> {{ error }} </b> {% endfor %} </ul>
                        {% endif %}
                  </div>

        <div class="row">
            <h3>Analysis options</h3>
            <div class="col-md-10">
                <span title="{{ form.limit_2_entity_type.description }}"> {{ form.limit_2_entity_type.label }}: {{ form.limit_2_entity_type() }} <br> </span>
                <span title="{{ form.o_or_u_or_both.description }}"> {{ form.o_or_u_or_both.label }}: {{ form.o_or_u_or_both() }}</span><br>
                <span title="{{ form.go_slim_or_basic.description }}"> {{ form.go_slim_or_basic.label }}: {{ form.go_slim_or_basic() }}</span><br>
                <span title="{{ form.multiple_testing_per_etype.description }}"> {{ form.multiple_testing_per_etype.label }}: {{ form.multiple_testing_per_etype() }}</span><br>
            </div>
        </div>
        <div class="row">
            <h3>Report options</h3>
            <div class="col-md-8">
            <br>
                <table>
                    <tr title="{{ form.p_value_cutoff.description }}"><td class="somename">{{ form.p_value_cutoff.label }}: </td><td>{{ form.p_value_cutoff() }}</td>
                        {% if form.p_value_cutoff.errors %}
                            <tr><td colspan="2"><ul class="errors"> {% for error in form.p_value_cutoff.errors %} <b> {{ error }} </b> {% endfor %} </ul></td></tr>
                        {% endif %}
                    <tr title="{{ form.FDR_cutoff.description }}"><td class="somename">{{ form.FDR_cutoff.label }}: </td><td>{{ form.FDR_cutoff() }}</td>
                        {% if form.FDR_cutoff.errors %}
                    <tr>
                        <td colspan="2"><ul class="errors"> {% for error in form.FDR_cutoff.errors %} <b> {{ error }} </b> {% endfor %} </ul></td></tr>
                        {% endif %}
                    <tr title="{{ form.filter_foreground_count_one.description }}"><td class="somename">{{ form.filter_foreground_count_one.label }}: </td><td>{{ form.filter_foreground_count_one() }}</td>
                    <tr title="{{ form.filter_parents.description }}"><td class="somename">{{ form.filter_parents.label }}: </td><td>{{ form.filter_parents() }}</td>
                    <tr class="characterize_foreground" title="{{ form.score_cutoff.description }}"><td class="somename">{{ form.score_cutoff.label }}: </td><td>{{ form.score_cutoff() }}</td>
                        {% if form.score_cutoff.errors %}
                        <tr><td colspan="2"><ul class="errors"> {% for error in form.score_cutoff.errors %} <b> {{ error }} </b> {% endfor %} </ul></td></tr>
                        {% endif %}
                </table>
            <div class="col-md-4">
            </div>
        </div>
        </div>
        <br>
        <div class="row">
            <div class="col-md-8">
            <button id="submit_button" type="submit" class="btn btn-primary">Submit</button>
            <button id="clear_button" type="button" class="btn btn-primary">Clear</button>
                </div>
        </div>
		<br><br><br><br>
	</form>
</div>
{% endblock content %}


